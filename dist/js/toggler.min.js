/*!
 * Toggler (https://github.com/deivydasv/toggler)
 * Version: 1.0.0
 * Last update on: 2017-11-17 01:40:39
 * Author: Deivydas Vaseris
 */

"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Toggler=function(){function e(){if(_classCallCheck(this,e),arguments.length){var t=arguments[0];if("string"==typeof t&&(t=document.body.querySelector(t)),t instanceof HTMLElement){if(t.Toggler)return t.Toggler;t.Toggler=this,this.element=t,this.element.classList.add(e.Config.CLASS_BASE)}}}return _createClass(e,null,[{key:"getPlugin",value:function(t){return t.Toggler||new e(t)}},{key:"TransitionEnd",get:function(){return"transition"in document.documentElement.style?"transitionend":"WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":null}}]),_createClass(e,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.element,o=[];if(!this.isVisible()&&!this.isTransitioning()){e:if(t){if(!(t="string"==typeof t?document.body.querySelector(t):t))break e;if(!(o=t.querySelectorAll("."+e.Config.CLASS_BASE)))break e;o=Array.from(o).filter(function(e){return!e.isSameNode(a)});var r=!0,l=!1,d=void 0;try{for(var c,g=o[Symbol.iterator]();!(r=(c=g.next()).done);r=!0){var u=c.value,h=e.getPlugin(u);if(h.isTransitioning())return;h.isVisible()&&h.hide(null,n||s)}}catch(e){l=!0,d=e}finally{try{!r&&g.return&&g.return()}finally{if(l)throw d}}}if(n)return a.classList.add(e.Config.CLASS_VISIBLE),this._triggerCheck(),void this._dispatchEvent("show");(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(a.style.opacity=0),this.isFadeAnimation()||(a.style.height=0),a.classList.add(e.Config.CLASS_TRANSITIONING),this._repaint(),this._addTransitionEndListener(function t(n){a.classList.add(e.Config.CLASS_VISIBLE),(i.isFadeAnimation()||i.isSlideFadeAnimation())&&(a.style.opacity=null),i.isFadeAnimation()||(a.style.height=null),i._removeTransitionEndListener(t),a.classList.remove(e.Config.CLASS_TRANSITIONING),i._triggerCheck(),i._dispatchEvent("show")}),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(a.style.opacity=1),this.isFadeAnimation()||(a.style.height=a.scrollHeight+"px")}}},{key:"hide",value:function(){var t=this,i=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]),n=this.element;if(!this.isHidden()&&!this.isTransitioning()){if(i)return this.element.classList.remove(e.Config.CLASS_VISIBLE),this._triggerCheck(),void this._dispatchEvent("hide");n.classList.add(e.Config.CLASS_TRANSITIONING),n.classList.remove(e.Config.CLASS_VISIBLE),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(n.style.opacity=1),this.isFadeAnimation()||(n.style.height=n.offsetHeight+"px"),this._repaint(),this._addTransitionEndListener(function i(){(t.isFadeAnimation()||t.isSlideFadeAnimation())&&(n.style.opacity=null),t.isFadeAnimation()||(n.style.height=null),t._removeTransitionEndListener(i),n.classList.remove(e.Config.CLASS_TRANSITIONING),t._triggerCheck(),t._dispatchEvent("hide")}),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(n.style.opacity=0),this.isFadeAnimation()||(n.style.height=0)}}},{key:"tab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.show(e,t,!0)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isHidden()?this.show(e,t):this.hide(null,t)}},{key:"isTransitioning",value:function(){return this.element.classList.contains(e.Config.CLASS_TRANSITIONING)}},{key:"isVisible",value:function(){return this.element.classList.contains(e.Config.CLASS_VISIBLE)}},{key:"isHidden",value:function(){return!this.isVisible()}},{key:"isFadeAnimation",value:function(){return this.element.classList.contains(e.Config.CLASS_FADE)}},{key:"isSlideFadeAnimation",value:function(){return this.element.classList.contains(e.Config.CLASS_SLIDEFADE)}},{key:"isSlideAnimation",value:function(){return!this.element.classList.contains(e.Config.CLASS_FADE)&&!this.element.classList.contains(e.Config.CLASS_SLIDEFADE)}},{key:"_triggerCheck",value:function(){var t=this;document.body.querySelectorAll("[data-toggler]").forEach(function(i){var n=void 0;if(i.dataset.togglerTarget?n=i.dataset.togglerTarget:i.hasAttribute("href")&&(n=i.getAttribute("href")),n){document.body.querySelectorAll(n).forEach(function(n){n.isSameNode(t.element)&&(e.getPlugin(n).isVisible()?i.classList.add(e.Config.CLASS_TARGET_VISIBLE):i.classList.remove(e.Config.CLASS_TARGET_VISIBLE))})}})}},{key:"_repaint",value:function(){getComputedStyle(this.element).height}},{key:"_dispatchEvent",value:function(e){this.element.dispatchEvent(new Event("toggler."+e))}},{key:"_addTransitionEndListener",value:function(t){e.TransitionEnd?this.element.addEventListener(e.TransitionEnd,t):t()}},{key:"_removeTransitionEndListener",value:function(t){e.TransitionEnd&&this.element.removeEventListener(e.TransitionEnd,t)}}],[{key:"Init",value:function(t){e.Config=Object.assign({CLASS_BASE:"js-toggler",CLASS_VISIBLE:"is-visible",CLASS_TARGET_VISIBLE:"is-target-visible",CLASS_TRANSITIONING:"is-transitioning",CLASS_FADE:"is-fade",CLASS_SLIDEFADE:"is-slidefade"},t||{});var i=function(){document.body.addEventListener("click",function(t){for(var i=void 0,n=t.target;n!=document.body;n=n.parentElement)if(n.matches("[data-toggler]")){i=n;break}if(i){t.preventDefault();var s=void 0;if(i.dataset.togglerTarget?s=i.dataset.togglerTarget:i.hasAttribute("href")&&(s=i.getAttribute("href")),s){var a=document.body.querySelectorAll(s),o=(i.dataset.toggler.match(/(show|hide|tab)/gi)||["toggle"])[0].toLowerCase(),r=!!i.dataset.togglerForce,l=document.body.querySelector(i.dataset.togglerCollection);a.forEach(function(t){e.getPlugin(t)[o](l,r)})}}}),document.body.querySelectorAll("[data-toggler]").forEach(function(t){var i=void 0;if(t.dataset.togglerTarget?i=t.dataset.togglerTarget:t.hasAttribute("href")&&(i=t.getAttribute("href")),i){document.body.querySelectorAll(i).forEach(function(i){e.getPlugin(i).isVisible()?t.classList.add(e.Config.CLASS_TARGET_VISIBLE):t.classList.remove(e.Config.CLASS_TARGET_VISIBLE)})}})};"loading"==document.readyState?document.addEventListener("DOMContentLoaded",i):i(),e.Init=null}}]),e}();